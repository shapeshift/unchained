#!/bin/bash

set -e

start() {
  MONIKER=unchained \
  CHAIN_JSON=https://raw.githubusercontent.com/cosmos/chain-registry/master/cosmoshub/chain.json \
  P2P_SEEDS=84718db3de9588699b797965879d282061960293@51.79.20.219:26656,bbe37bd39106f1cdd350800795dbeec4b874be5e@84.80.24.31:26656,31681c089f19cbc8008e133c64e2b524aff0dd3f@46.4.107.112:14956,d17dffabf7ad521719e4175245d54ac2994a458d@138.201.127.91:26678,1d0eb9185523d5e8d09451557cb837d50112d8e2@51.195.63.75:11256,213857e741833d17275ea559bb2d0342398cec99@35.245.206.45:26656,d09c50da7b46624b8f1866bcf66fa11639bfb696@198.244.203.179:26656,dc3a1d1fbe0e477ebdb56fcee13ac6288fce2d87@65.108.141.62:26656,344d87e04fdf04be760da5069a59d9a489b886a6@52.14.44.1:26656,d2247f7b919f0781c90ee61958d7044665a22d38@164.152.161.86:26656,55debc20a243bbb6acc5db054559953bb87acb30@162.251.238.5:26656,60b343bcbc45e167c5466146c906d31bc202b68b@66.85.135.34:48656,2e470eb2dfd65ffa34a9ae2d73646f82c6e594b7@65.108.10.36:26656,c1e437f73b8889b78ea34981e7c349157ad80284@107.135.15.66:26656,a2bd6a63813bba08e2b8504f6eace00d088cff82@23.88.18.142:26656,3c08dde641866bf332e1a9f94261a39d57247328@65.108.230.27:26656,57b3ec821a394c243a856b2c82cfb59b7830b0ac@65.108.98.218:19095,64148c47e1424173e3dcf90ab90bf196c2971b15@88.218.224.118:26656,762175c3ae976cc93d28a151a8551c1a0018f32d@20.48.28.69:26656,ab7370e0af17b3fb10c912e722ff05e6e6505fc4@52.76.189.151:26656,36bdcff719d773a032f1250dcb2c8669ec43816d@34.240.122.232:26656,ea1779f3c46730e98727fbc0499ba45b31a40ce0@95.216.16.205:14956,b9b99fbf40189c604ea618c4b99c61abc1489b70@18.140.125.215:26656,b533749dfe0dc09eff1dfb2adf83108f9125ee1c@162.55.97.111:26656,0b27d23a50a6969a22b268ec90a198c31b741b2d@65.108.103.184:27656,6f473f7156b9e0a460f5ab9d5b8bba2412058974@93.159.134.156:36656,2633bc088bcf96209b695734005952906b5c45e3@3.123.191.80:26656,9ad89d6c32ba5841beaa0e5b69b98ee50f3d7339@15.235.53.186:26656,be6a3c78962d1dff8e79bfa6548ea40d837d8640@86.111.48.34:26656,2441e90fcb341fcd5bebec15b54e346cdca64a9b@135.148.123.8:14956,a0aca8fb801c69653a290bd44872e8457f8b0982@47.99.180.54:26656,7dd34d8d3880bc48eff3e47b941d06bd1941a962@93.115.25.106:26656,dee3771d222681139d9df18d4e127d4f52820614@65.108.142.81:26656,9d7d9ba2b9bc1c805a24413fcfdc75010d52dd61@159.89.101.239:26090,3b0892257d94a60f28de7e49f1f0ff8633aff4ba@65.108.100.71:26856,989f4e22208c3a77bd8b550ce68d8ad23e5bdda7@3.129.15.134:26656,fa38d67ef951dd19d934894541ea806fcad8fed8@44.208.202.207:443,47f8eb3d20e8a7388a7a8bfb38826d7e95f65552@185.252.220.88:25028,c6f03336e99b15b104048a1af056063107389441@18.142.7.52:26656,2eb0e5e53401c51535c13250aba5fe98374ba7f0@51.210.32.145:26656,8707282f51ebfba828c08a7316ca84ed5667a0f5@74.118.142.175:26656,44390f449904199d22148d07822b1462048a38ef@74.118.139.150:26656,1d02b4300c6b6fd1123a20502f0b3c0ce3b73654@88.198.16.9:26656,cd1f0506747c62f0bafc2707dec85821a4fbfa26@34.236.146.84:26656,3c99aba53d77d9b86efb9a7a74037761360086e6@18.139.147.9:26656,c14d39422b5d70d9084d19d286c7427c0762cdfc@162.55.92.114:2010,538348fa1eac998dad392a3f00f7b957042c3e84@15.235.53.86:11156,371a781ed95b643d4758b3736ab827ce1cbe4e98@65.108.136.206:26656,84569a6deb24db7e3e9fe1821ec07282d597d293@220.232.174.218:26656,2b4b4e3b376af4becd60865cc71f81c7e148375c@213.168.232.12:26656,ae31f306e33a100e20b12f17cd91428120ed883c@54.81.193.10:26656,51c49b57b371e3645de715e0034236a8bd61965e@35.234.21.2:26656,f40a6e7d7168a3f2a5362cd37cbe6eac7a686056@185.229.119.178:26656,241b17dba97a2ed3c3747d12781fb86c9706e2d4@89.58.27.86:26656,b79e1d3a621bdafd3a8d9a49dff8f4737d0bedc9@52.73.168.104:26656,f9b0745b2e969422f2a208327d84266ff5d82e50@65.109.82.115:26656,c9bebf70be2b703c9ee3e7fc97d2efbca7a84ed8@3.238.175.107:26656,6ea2ef7d3dd5d6967708a0b31eed85ba090a90a1@65.108.121.190:12010,44594a57ce538a21f8558bcb1c9ce560ad879e3e@15.235.114.84:26656,298b87256adc41a8cf7ac3c755c23020ac96ac7f@34.145.9.235:26656,3da88430414ec9084c8983fe4d462cce655ff1f3@51.222.245.114:26656,cf10a45ead9e76d45b06dee97ef779e65103c78e@3.128.185.235:26656,4ddba29a7dfa740a4edeb5c620c963f67f951e1d@5.9.72.212:2000,76c65af180735315774497698ccf2091fb81284e@34.141.50.37:26656,72829b78b38408b03793ed389b9f16596b82c306@146.59.81.92:26656,581bd4859a0a6bf2fa7ea4850d45fec4e92c6173@91.194.30.202:31656,34f0e424f747f62e04e8c34fde60013fb4dbc04b@65.108.0.165:14956,3a94f1021e84bb54a640e5b1c1fe16827824e4f7@51.79.20.217:26656,448446aef1a89a89d0d543c1704254e5c5646c97@43.201.110.211:26656,3084d6a288e20cbddac77b776906550c1029907a@65.109.41.3:27000,2286eeee09fcf37e768dfffc0db8c821b9231b7b@204.16.244.78:26656,61afb0f37c02031f285f6b27ead2a3e7a97cc28a@35.212.34.104:26656,8698cb819c9a4503fe2c71055f1380d08edc5adf@204.16.244.116:26656,573692f610c093ac1fc42df916103f54f9ba56ea@65.21.132.27:21986,d04d93c9dec72a5e5850ac91232b29a8c16a5326@95.217.170.202:27002,eebc7a0257c91306b38fb42924b9292d6dd2951c@51.79.176.202:26656,61bb33c7869e1d5014c996299a818d816ae961a6@52.77.137.184:26656,5aa66312a7ad2550c66165715c16f2b76e19c3a7@46.4.113.202:26656,b212d5740b2e11e54f56b072dc13b6134650cfb5@169.155.169.37:26656,e4ddf5c29adca9505a51d19c653e4e472f06d119@18.232.149.102:26656,f8ae898b130457bbbf05fd3d2e9ca4559bd528fd@37.120.245.157:26656,1cce99042f884d669e7287e3e362bff8e385c63e@46.4.79.183:26726,e829d4764a5cecc44b3414777853b34407b36601@185.16.39.179:26656,d9dbd30f7e9ae99dc05645f48f4637c2f4a14645@34.107.9.71:26656,89757803f40da51678451735445ad40d5b15e059@169.155.168.135:26656,32bdba6ced12cdf2e534566e6c3d66ee2f7ef494@84.244.95.229:26656,137f98c8e22965e672744a3f8909c0f4c8cffc53@135.148.54.43:26656,27ad834c62dbefc5beb74be7575515927bd07c58@193.176.85.151:26656,d82513849c2722a32e2e03617a516f65b3ca0216@176.191.97.120:33656,d0238198ffa7f4db9a5d8c7b131c73f8382f8c47@65.108.141.109:30656,322efd4fdc72a189a2fc8b2b597927831df2bbed@128.0.51.9:26656,8a57bf56d67bccf5b2c910ae4790fa40a3d9ff75@157.90.34.91:26656,4fb444050d0084c4aa81f9f55e10060063179dd9@151.80.26.241:26656,d35f08a60aeb2729d07e92e778b4c6f83379092e@18.138.160.68:26656,0eae0c3b87453c625a1de230fca4993b8ebe5c00@65.21.94.45:26656,c540af0c82963228aa865d27d9b6142fc54b571d@176.9.102.164:26656,a7d96dc929824613315dcc1c90fee119f28cc51f@134.65.193.5:26656,dea13e7232642331360d4387b0ab106b014092d4@116.202.236.59:26656,373c13421a65ddd178c130c40b6db47330945a48@34.247.239.219:26656,ade4d8bc8cbe014af6ebdf3cb7b1e9ad36f412c0@seeds.polkachu.com:14956 \
  P2P_PERSISTENT_PEERS=0 \
  run.sh gaiad start \
    --rpc.laddr tcp://0.0.0.0:26657 \
    --minimum-gas-prices 0uatom \
    --pruning nothing &
  PID="$!"
}

stop() {
  echo "Catching signal and sending to PID: $PID" && kill $PID
  while $(kill -0 $PID 2>/dev/null); do sleep 1; done
}

trap 'stop' TERM INT
start
wait $PID