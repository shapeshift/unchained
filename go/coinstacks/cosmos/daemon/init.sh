#!/bin/bash

set -e

start() {
  MONIKER=unchained \
  CHAIN_JSON=https://raw.githubusercontent.com/cosmos/chain-registry/master/cosmoshub/chain.json \
  P2P_SEEDS=c540af0c82963228aa865d27d9b6142fc54b571d@176.9.102.164:26656,ab7370e0af17b3fb10c912e722ff05e6e6505fc4@52.76.189.151:26656,6ea2ef7d3dd5d6967708a0b31eed85ba090a90a1@65.108.121.190:12010,9c116194f25fd0d146019f171ef0f49904dcc586@167.86.98.230:26656,b9b99fbf40189c604ea618c4b99c61abc1489b70@18.140.125.215:26656,5bd7c5ee784acd3d81455d07c372735f2093dce2@65.109.22.90:26656,381a2e419620a56ecdb3684a4272ee9e5b989e0a@18.166.143.49:26656,4d4df0f3e9578074606a104dd24f2c5f50ed7c1d@65.108.203.149:24656,dee3771d222681139d9df18d4e127d4f52820614@65.108.142.81:26656,26ac129d380e7010473dfeda9c84bf25450c711f@91.239.56.4:26656,0eeaa8b9a2ef91c29bce54ca811407191c371928@213.136.75.225:26656,241b17dba97a2ed3c3747d12781fb86c9706e2d4@89.58.27.86:26656,573692f610c093ac1fc42df916103f54f9ba56ea@65.21.132.27:21986,0eeb20e044d632b279e67f2fe91f50e4fceab1fd@159.223.223.84:26656,538348fa1eac998dad392a3f00f7b957042c3e84@15.235.53.86:11156,d82513849c2722a32e2e03617a516f65b3ca0216@176.191.97.120:33656,a2bd6a63813bba08e2b8504f6eace00d088cff82@23.88.18.142:26656,213857e741833d17275ea559bb2d0342398cec99@35.245.206.45:26656,dd02e65e4a4374a40ab8f85de3038757becc7f33@159.69.168.249:26656,6a45e3655209dacddedf735a898ccfcae085abec@65.109.182.72:26656,819a363d2fd3f95d95f6ab6ff380dd24773030b5@47.104.201.108:26656,0b27d23a50a6969a22b268ec90a198c31b741b2d@65.108.103.184:27656,6b4a6e35c5329b07f23662c683e24b262dd10b5e@195.189.96.115:26656,3c08dde641866bf332e1a9f94261a39d57247328@65.108.230.27:26656,57b3ec821a394c243a856b2c82cfb59b7830b0ac@65.108.98.218:19095,f5f8b96406a165d486be243723bfa7291db1cf62@35.230.170.155:26656,b79e1d3a621bdafd3a8d9a49dff8f4737d0bedc9@52.73.168.104:26656,daa6d8314246ad65037a48ec2e2266eeea9d46f8@154.53.63.50:26656,d9bfa29e0cf9c4ce0cc9c26d98e5d97228f93b0b@65.109.88.38:34656,c1e437f73b8889b78ea34981e7c349157ad80284@107.135.15.66:26656,3da88430414ec9084c8983fe4d462cce655ff1f3@51.222.245.114:26656,7b8ab74fa7c3cc10b203b990abfc86e1a0b82a79@34.254.201.211:26656,2633bc088bcf96209b695734005952906b5c45e3@3.123.191.80:26656,b533749dfe0dc09eff1dfb2adf83108f9125ee1c@162.55.97.111:26656,89367eebb50a7da333d80dce71b5d5020eb01f84@23.90.70.43:49656,e829d4764a5cecc44b3414777853b34407b36601@185.16.39.179:26656,53b3651680ec3482d736808cbb3035940107f8ab@185.146.148.119:26656,fcdbddfd8b10c647c6747256abecf3cbf1bed390@136.243.55.226:26696,5dec3f53ee44689531cf1e16d89f6b0fe559ead9@168.119.71.45:26656,1be2bc01d01005833c538dedf11b23207cbb43f1@35.227.148.34:26656,afee98f7f8039a43df27b57ee74d35d0779acd53@54.171.140.109:26656,dd53fa5cfb6a604feb80860d47506d0dd84baa12@142.132.210.234:26656,dea13e7232642331360d4387b0ab106b014092d4@116.202.236.59:26656,dff07399aeadf3f1b6edfac07f92a238112d3036@93.189.30.120:26656,30d9cdef07cdb54e9ada05132688231831f3156b@18.118.215.160:26656,3c99aba53d77d9b86efb9a7a74037761360086e6@18.139.147.9:26656,fb170235188ab61a9282441f9d0f30996effcdb7@65.108.136.206:26656,16120f868dddf294ae85f55d9c3e25689e1f207b@34.226.122.134:26656,e3a129543d1642787af5a3bef826dec931e928f3@77.73.69.150:26656,34f0e424f747f62e04e8c34fde60013fb4dbc04b@65.108.0.165:14956,f40a6e7d7168a3f2a5362cd37cbe6eac7a686056@185.229.119.178:26656,51c49b57b371e3645de715e0034236a8bd61965e@35.234.21.2:26656,4ddba29a7dfa740a4edeb5c620c963f67f951e1d@5.9.72.212:2000,d35f08a60aeb2729d07e92e778b4c6f83379092e@18.138.160.68:26656,8698cb819c9a4503fe2c71055f1380d08edc5adf@204.16.244.116:26656,195d286334b860c4e420aa5f86a1fa61c2a6ac1a@146.59.0.123:2010,f58fa3aa606d321863effe34cfc7b22cfbfcbc2c@51.91.7.44:26656,7dd34d8d3880bc48eff3e47b941d06bd1941a962@93.115.25.106:26656,4c46d32cbc4777c59a91a53fdadf8a3fa362036e@116.202.10.68:26656,5b4529df65f9c1006d51472a827f1deb23825ba2@167.235.34.35:14656,8dc4fd0007c74bdf4b7ee1e5a3ab68161cc8f845@142.132.208.213:26656,72829b78b38408b03793ed389b9f16596b82c306@146.59.81.92:26656,093e33f123c4201855a2387513b5e5dea064e479@176.9.138.235:26656,88b03d0ae562ec55414bef4b3e0073bb16933938@18.138.176.63:26656,84cc83cd09a974a234a3fdb5bb4fd46fd856f8ec@142.132.135.239:26656,a4a84dbfc3392f65d0954ac2aed2df1e6847ff29@51.107.3.206:26656,158104de0e55f15bae9bf98893206173711dd907@3.91.81.82:26656,4e1c2471efb89239fb04a4b75f9f87177fd91d00@135.181.55.241:26656,703714c82c94fc1c74b6ee0d1fc3417b932be5f3@169.155.44.11:26656,bd410d4564f7e0dd9a0eb16a64c337a059e11b80@47.103.35.130:26656,344d87e04fdf04be760da5069a59d9a489b886a6@52.14.44.1:26656,aa70e2cc756b8dd9e265e578197d3049d67d731f@93.189.30.109:26656,12ec6fbf99faa088375ee776f641903fc680f0d4@51.38.52.188:26615,48fc4fe58d5392bda805212ba0c8e4e772dba1f9@142.132.158.93:14956,17a36a938b247e887a5b0d5f07a6c7df78d1c89c@54.37.81.39:26656,a94dff85ed430f0475f41fe306c82b7eb7f6e858@51.91.153.78:31649,60b343bcbc45e167c5466146c906d31bc202b68b@66.85.135.34:48656,1cce99042f884d669e7287e3e362bff8e385c63e@46.4.79.183:26726,21324a8ab48c26d64a71cea42654e3554e1845f8@222.252.2.167:26656,ba3bacc714817218562f743178228f23678b2873@34.141.15.99:26656,6f4ae13f49c26d501b231ee03ce7b0a77fdee719@3.249.135.148:26656,4607d5a633db023f4618149ea443aec361e904db@18.140.170.32:26656,7482f217cbe2b2174392eba767f8dee3c5181d29@167.235.21.165:26657,9e367e42b5dff11f12107582cb21a2a3aa97aca1@139.162.165.214:26656,322efd4fdc72a189a2fc8b2b597927831df2bbed@128.0.51.9:26656,6f473f7156b9e0a460f5ab9d5b8bba2412058974@93.159.134.155:36656,2e470eb2dfd65ffa34a9ae2d73646f82c6e594b7@65.108.10.36:26656,614110aa53c4d6ee6b47cc10a420e2a001691e7b@51.81.208.4:26656,23feb0c884379259cee000ef1226783727319f0b@135.181.138.109:26656,53942459f63835c8fd0d33766d280060c8476dfb@65.109.52.178:26656,a09ed43e09f773e39855dc5d8b6a220eff4cb947@204.16.241.207:26656,97e8ca8e1c91168eb70beb56b29fb135d5e19d65@131.153.242.199:26656,ee767901f4a7eaf44603ef0a5b6e5edac118ba1e@74.118.136.149:26656,2db4db5e13338bbc9fe2af1faca8540e409e24f1@65.108.105.155:26656,7dbd25c2e2bf602d6ed14b9a2648bdcd58f3e79d@65.108.77.106:26649,97e4468ac589eac505a800411c635b14511a61bb@23.88.18.49:26656,7b8ba795663a3d0ffa5333ab5bbbff3cac4e6dff@142.132.244.107:27002,b7ea5e11d7a6b30fbb2dbe8c9d415170bfb4611c@209.182.239.210:26656,5d45bc48f6c0199c047e685fafb4309f53593f37@5.161.119.242:49656,ade4d8bc8cbe014af6ebdf3cb7b1e9ad36f412c0@seeds.polkachu.com:14956 \
  P2P_PERSISTENT_PEERS=0 \
  run.sh gaiad start \
    --rpc.laddr=tcp://0.0.0.0:26657 &
  PID="$!"
}

stop() {
  echo "Catching signal and sending to PID: $PID" && kill $PID
  while $(kill -0 $PID 2>/dev/null); do sleep 1; done
}

trap 'stop' TERM INT
start
wait $PID